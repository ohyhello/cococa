"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(e,t){"undefined"!=typeof module&&void 0!==module.exports?module.exports=t(e):"function"==typeof define&&define.amd?define([],t(e)):e.LazyLoadImg=t(e)}("undefined"!=typeof global?global:window||(void 0).global,function(e){return function(){function o(e){_classCallCheck(this,o);var t={selector:".lazy-img",virtualSrc:"",callback:null};for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);this.options=e,this.images=[].slice.call(document.querySelectorAll(e.selector)),this.init()}return _createClass(o,[{key:"init",value:function(){var n=this;if(e.IntersectionObserver){this.observer=new IntersectionObserver(function(e){e.forEach(function(e){if(0<e.intersectionRatio){n.observer.unobserve(e.target);var t=e.target;n.loadImage(t)}})},{root:null,rootMargin:"0px",threshold:[0]}),this.images.forEach(function(e){n.observer.observe(e)})}else document.addEventListener("scroll",function(){n.LazyLoadImage()})}},{key:"LazyLoadImage",value:function(){var t=this,n=e.document.documentElement.clientHeight||e.document.body.clientHeight;this.images.forEach(function(e){e.getBoundingClientRect().top<=n&&t.loadImage(e)})}},{key:"loadImages",value:function(){var t=this;this.images.forEach(function(e){t.loadImage(e)})}},{key:"loadImage",value:function(e){var t=e.getAttribute(this.options.virtualSrc);this.options.callback?this.options.callback(e,t):"img"===e.tagName.toLowerCase()?t&&(e.src=t):e.style.backgroundImage="url(".concat(t,")")}},{key:"loadAndDestroy",value:function(){this.loadImages(),this.destroy()}},{key:"destroy",value:function(){this.observer.disconnect(),this.settings=null}}]),o}()}),new LazyLoadImg({selector:".lazy-loader",virtualSrc:"lazy-src",callback:function(e,t){var n=e.getAttribute("data").split("::");2<n.length&&(e.classList.remove("lazy-loader"),e.innerHTML="<img src=".concat(t,'  style="width:').concat(n[0],"px;height:").concat(n[1],'px" src="').concat(n[2],'" alt="').concat(n[2],'"/>'))}});